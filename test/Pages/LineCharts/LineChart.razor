@page "/LineChart"


<h3>Line Chart</h3>
<h3>Select Value @_selectChart</h3>
<h3>___________________________________________________</h3>
<button class="btn btn-primary" @onclick="DatasetAdd">Add Dataset</button>
<button class="btn btn-primary" @onclick="AddData">Add Data</button>
<ChartJsZO ChartConfig=@_configChart @ref=@childChart ChartClick=@ClickChart ></ChartJsZO>

@code {

    string _selectChart="NON";
    void ClickChart(EventClickChart argo)
    {
        _selectChart = argo.LabelsData;
    }
    ChartJsZO childChart;

    ChartBase _configChart;

    void DatasetAdd()
    {
        childChart.AddDetaset(new Dataset
            {
                Data =new DataTest().DataForMonth, 
                Label = "Test chart One",
                RandomColor = true,


            });
    }


    void AddData()
    {
        var data = childChart.ChartConfig.Data;
        var set = data.Datasets[0];
        if (data == null) return;
        var rnd = (new Random().Next(0,500)).ToString();
        set.Data.Add(rnd);
        if(data.Labels.Count() <= set.Data.Count())
        {
            data.Labels.Add(rnd);
        }
    }

    protected override void OnAfterRender(bool firstRender)
    {
        if (!firstRender) return;
        _configChart = new ChartBase
            {
                Type =TypChart.line,
                Options = new Options
                {
                    Responsive = true,
                }
            };

            List<Dataset> data = new List<Dataset>();
           data.Add(new Dataset
            {
                Data = new DataTest().DataForMonth,
                Label = "Test chart One",
                RandomColor = true,


            });
           data.Add(new Dataset
            {
                Data = new DataTest().DataForMonth,
                                        Label = "Test chart Tow",
                                        BorderColor = new[] { ColorChartZo.red() } ,
                                        BackgroundColor =new[] { ColorChartZo.blue(1) },
                                        BorderWidth =2


            });
        _configChart.Data  = new DataChart
        {
            Labels =new DataTest().LabelMonth,
            Datasets = data
            
        };

        
         
              StateHasChanged();
           
       
   
        
    }

}
